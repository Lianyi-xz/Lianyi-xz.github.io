<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Lianyi Blog</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2018-02-01T07:57:04.182Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>Lian yi</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Jenkins部署</title>
    <link href="http://yoursite.com/Devops_Jinkens_install.html"/>
    <id>http://yoursite.com/Devops_Jinkens_install.html</id>
    <published>2018-02-01T07:57:04.179Z</published>
    <updated>2018-02-01T07:57:04.182Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>经果四天的研究，我成功变成了智障  有缘再看吧</p></blockquote><h3 id="docker-运行Jenkins"><a href="#docker-运行Jenkins" class="headerlink" title="docker 运行Jenkins"></a>docker 运行Jenkins</h3><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="keyword">run</span> \</span><br><span class="line">  --rm \</span><br><span class="line">  -u root \</span><br><span class="line">  -p 8080:8080 \</span><br><span class="line">  -v jenkins-data:/var/jenkins_home \</span><br><span class="line">  -v /var/run/docker.sock:/var/run/docker.sock \</span><br><span class="line">  -v "$HOME":/home \</span><br><span class="line">  jenkinsci/blueocean</span><br></pre></td></tr></table></figure><h3 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h3><p><a href="https://jenkins.io/doc/tutorials/build-a-java-app-with-maven/" target="_blank" rel="noopener">官方文档</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;经果四天的研究，我成功变成了智障  有缘再看吧&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;docker-运行Jenkins&quot;&gt;&lt;a href=&quot;#docker-运行Jenkins&quot; class=&quot;headerlink&quot; title=&quot;do
      
    
    </summary>
    
      <category term="运维" scheme="http://yoursite.com/categories/Devops/"/>
    
    
      <category term="Jenkins" scheme="http://yoursite.com/tags/Jenkins/"/>
    
  </entry>
  
  <entry>
    <title>Docker Swarm 实验</title>
    <link href="http://yoursite.com/Devops_Docker_Swarm_example.html"/>
    <id>http://yoursite.com/Devops_Docker_Swarm_example.html</id>
    <published>2018-01-30T07:23:42.278Z</published>
    <updated>2018-01-30T07:23:42.283Z</updated>
    
    <content type="html"><![CDATA[<h3 id="基本环境"><a href="#基本环境" class="headerlink" title="基本环境"></a>基本环境</h3><ul><li>manager：10.10.0.132</li><li>work1：10.10.0.133</li><li>work2：10.10.0.134</li></ul><h3 id="创建swarm"><a href="#创建swarm" class="headerlink" title="创建swarm"></a>创建swarm</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker swarm init --advertise-addr 10.10.0.132      <span class="comment">#初始化Docker引擎集群</span></span><br><span class="line">docker info                                         <span class="comment">#查看swarm状态</span></span><br><span class="line">docker node ls                                      <span class="comment">#查看swarm相关节点</span></span><br><span class="line">docker swarm ca --rotate                            <span class="comment">#生成新的CA证书和密钥</span></span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="swarm中添加节点"><a href="#swarm中添加节点" class="headerlink" title="swarm中添加节点"></a>swarm中添加节点</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">docker swarm join-token worker                      <span class="comment">#检索worker的添加命令</span></span><br><span class="line">docker swarm join-token  --rotate worker            <span class="comment">#生成新的worker令牌</span></span><br><span class="line">docker swarm join-token manager                     <span class="comment">#检索manager的添加命令</span></span><br><span class="line">docker node promote &lt;node name&gt;                     <span class="comment">#工作节点提升为管理节点</span></span><br><span class="line">docker node demote   &lt;node name&gt;                    <span class="comment">#管理节点降级为工作节点</span></span><br><span class="line">docker swarm join \                                 <span class="comment">#添加工作节点到swarm</span></span><br><span class="line">     --token SWMTKN-1-34lurdcnbjpbxszzi47gw2l8hbjdzy7vjzcxe38ay776pbe8lj-9ao0aojs37006socamuioe3ht  \</span><br><span class="line">    10.10.0.132:2377</span><br></pre></td></tr></table></figure><h3 id="查看节点信息"><a href="#查看节点信息" class="headerlink" title="查看节点信息"></a>查看节点信息</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker node inspect node_id</span><br><span class="line">docker node inspect --pretty node_id</span><br><span class="line">docker swarm leave                                     <span class="comment">#离开swarm</span></span><br></pre></td></tr></table></figure><h3 id="部署应用服务"><a href="#部署应用服务" class="headerlink" title="部署应用服务"></a>部署应用服务</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker service create \ </span><br><span class="line"> --replicas 1 \              <span class="comment">#在一个容器上运行服务           </span></span><br><span class="line"> --name hello \              <span class="comment">#服务名称</span></span><br><span class="line"> centos  \                   <span class="comment">#服务所使用镜像，不加标签 默认使用 laster镜像，服务运行节点需存在镜像</span></span><br><span class="line"> ping 10.10.0.134            <span class="comment">#容器运行的服务</span></span><br></pre></td></tr></table></figure><h3 id="查看swarm运行服务"><a href="#查看swarm运行服务" class="headerlink" title="查看swarm运行服务"></a>查看swarm运行服务</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker service inspect service_name                    <span class="comment">#查看服务详细信息</span></span><br><span class="line">docker service inspect --pretty service_name</span><br><span class="line">docker service ps service_name                         <span class="comment">#查看服务在那些节点运行</span></span><br></pre></td></tr></table></figure><h3 id="修改服务运行容器数量"><a href="#修改服务运行容器数量" class="headerlink" title="修改服务运行容器数量"></a>修改服务运行容器数量</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker service scale &lt;SERVICE-ID&gt;=&lt;NUMBER-OF-TASKS&gt;</span><br></pre></td></tr></table></figure><h3 id="删除服务"><a href="#删除服务" class="headerlink" title="删除服务"></a>删除服务</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker service rm service_name</span><br></pre></td></tr></table></figure><h3 id="服务更新"><a href="#服务更新" class="headerlink" title="服务更新"></a>服务更新</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker service update &lt;SERVICE-ID&gt;</span><br></pre></td></tr></table></figure><h3 id="服务滚动更新-创建服务时添加"><a href="#服务滚动更新-创建服务时添加" class="headerlink" title="服务滚动更新(创建服务时添加)"></a>服务滚动更新(创建服务时添加)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">--update-delay 10s               配置更新服务任务或任务组之间的时间延迟</span><br><span class="line">--update-parallelism             配置调度程序同时更新的最大服务任务数。</span><br></pre></td></tr></table></figure><h3 id="排空一个节点"><a href="#排空一个节点" class="headerlink" title="排空一个节点"></a>排空一个节点</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker node update --availability drain &lt;NODE-ID&gt;</span><br></pre></td></tr></table></figure><h3 id="发布服务端口"><a href="#发布服务端口" class="headerlink" title="发布服务端口"></a>发布服务端口</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker service create --name ser_name  --publish published=主机端口,target=容器端口  image</span><br></pre></td></tr></table></figure><h3 id="发布现有服务端口"><a href="#发布现有服务端口" class="headerlink" title="发布现有服务端口"></a>发布现有服务端口</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker service update  --publish-add published=主机端口,target=容器端口 service_name</span><br></pre></td></tr></table></figure><h3 id="查看服务发布端口"><a href="#查看服务发布端口" class="headerlink" title="查看服务发布端口"></a>查看服务发布端口</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker service inspect --format=<span class="string">"&#123;&#123;json .Endpoint.Spec.Ports&#125;&#125;"</span>  service_name</span><br></pre></td></tr></table></figure><h3 id="仅发布udp端口"><a href="#仅发布udp端口" class="headerlink" title="仅发布udp端口"></a>仅发布udp端口</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">--publish published=53,target=53,protocol=udp</span><br><span class="line">-p 53:53/udp</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;基本环境&quot;&gt;&lt;a href=&quot;#基本环境&quot; class=&quot;headerlink&quot; title=&quot;基本环境&quot;&gt;&lt;/a&gt;基本环境&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;manager：10.10.0.132&lt;/li&gt;
&lt;li&gt;work1：10.10.0.133&lt;/li&gt;
&lt;li&gt;work2：10.10.0.134&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;创建swarm&quot;&gt;&lt;a href=&quot;#创建swarm&quot; class=&quot;headerlink&quot; title=&quot;创建swarm&quot;&gt;&lt;/a&gt;创建swarm&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;docker swarm init --advertise-addr 10.10.0.132      &lt;span class=&quot;comment&quot;&gt;#初始化Docker引擎集群&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;docker info                                         &lt;span class=&quot;comment&quot;&gt;#查看swarm状态&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;docker node ls                                      &lt;span class=&quot;comment&quot;&gt;#查看swarm相关节点&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;docker swarm ca --rotate                            &lt;span class=&quot;comment&quot;&gt;#生成新的CA证书和密钥&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="运维" scheme="http://yoursite.com/categories/Devops/"/>
    
    
      <category term="Docker" scheme="http://yoursite.com/tags/Docker/"/>
    
  </entry>
  
  <entry>
    <title>Docker Swarm(集群)</title>
    <link href="http://yoursite.com/Devops_Docker_Swarm_base.html"/>
    <id>http://yoursite.com/Devops_Docker_Swarm_base.html</id>
    <published>2018-01-30T07:12:04.326Z</published>
    <updated>2018-01-30T07:12:04.332Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Swarm模式"><a href="#Swarm模式" class="headerlink" title="Swarm模式"></a>Swarm模式</h3><ul><li>Docker1.12.0或更高版本</li><li>使用Docker CLI 创建Swarm，将应用程序部署到swarm，并管理swarm行为</li><li>当前版本Docker包含swarm模式，用于本地管理的docker引擎集群被称为swarm</li></ul><h3 id="swarm概念"><a href="#swarm概念" class="headerlink" title="swarm概念"></a>swarm概念</h3><ul><li>swarm是由多个Docker主机组成，这些主机以swarm模式运行</li><li>分为管理者(管理成员和委托)和工作者(运行swarm服务)</li><li><p>给定Docker主机可以是管理者、工作者，或执行这两个角色</p></li><li><p>修改服务配置，无需重新启动服务</p></li><li>可在参与swarm的任何Docker主机以及swarm服务商运行独立容器</li><li>可以定义并运行swarm服务</li></ul><a id="more"></a><h3 id="节点"><a href="#节点" class="headerlink" title="节点"></a>节点</h3><ul><li>节点是docker引擎参与swarm的一个实例，可视为Docker节点</li><li>可在单台物理计算机或云服务器上运行一个或多个节点</li><li>生产swarm部署通常包括分布在多台物理机和云计算机上的Docker节点</li><li>若将应用程序部署到swarm，需要将服务定义提交给管理节点，管理节点将称为任务的工作单元分配给工作节点</li></ul><h3 id="服务和任务"><a href="#服务和任务" class="headerlink" title="服务和任务"></a>服务和任务</h3><ul><li>服务是任务的定义，在管理或工作节点执行</li><li>创建服务时，指定使用那个容器镜像以及在运行容器中执行那些命令</li><li>对于复制服务模型，swarm管理器根据所需状态中设置的比例在节点之间分配指定数量的副本任务</li><li>对于全局服务，swarm在集群中的每个可用节点上运行一项服务任务</li><li>一个任务携带Docker容器和在容器内运行的命令，是swarm的原子调度单位。</li><li>管理器节点根绝服务规模中设置的副本数量将任务分配给工作节点，一旦任务分配给一个节点，他就不能移动到另一个节点，只能在分配的节点上运行或失败。</li></ul><h3 id="负载均衡"><a href="#负载均衡" class="headerlink" title="负载均衡"></a>负载均衡</h3><ul><li>swarm管理器使用入口负载均衡来暴露对swarm外部提供的服务</li><li>swarm管理器可自动将服务分配给一个PublishedPort(30000-32767)，可配置</li><li>外部组件可以访问swarm中任何节点的已发布端口上的服务</li><li>Swarm模式有一个内部的DNS组件，可以自动为swarm中的每个服务配置一个DNS条目</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Swarm模式&quot;&gt;&lt;a href=&quot;#Swarm模式&quot; class=&quot;headerlink&quot; title=&quot;Swarm模式&quot;&gt;&lt;/a&gt;Swarm模式&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;Docker1.12.0或更高版本&lt;/li&gt;
&lt;li&gt;使用Docker CLI 创建Swarm，将应用程序部署到swarm，并管理swarm行为&lt;/li&gt;
&lt;li&gt;当前版本Docker包含swarm模式，用于本地管理的docker引擎集群被称为swarm&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;swarm概念&quot;&gt;&lt;a href=&quot;#swarm概念&quot; class=&quot;headerlink&quot; title=&quot;swarm概念&quot;&gt;&lt;/a&gt;swarm概念&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;swarm是由多个Docker主机组成，这些主机以swarm模式运行&lt;/li&gt;
&lt;li&gt;分为管理者(管理成员和委托)和工作者(运行swarm服务)&lt;/li&gt;
&lt;li&gt;&lt;p&gt;给定Docker主机可以是管理者、工作者，或执行这两个角色&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;修改服务配置，无需重新启动服务&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;可在参与swarm的任何Docker主机以及swarm服务商运行独立容器&lt;/li&gt;
&lt;li&gt;可以定义并运行swarm服务&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="运维" scheme="http://yoursite.com/categories/Devops/"/>
    
    
      <category term="Docker" scheme="http://yoursite.com/tags/Docker/"/>
    
  </entry>
  
  <entry>
    <title>Docker Registry(私有仓库)</title>
    <link href="http://yoursite.com/Devops_Docker_registry.html"/>
    <id>http://yoursite.com/Devops_Docker_registry.html</id>
    <published>2018-01-30T07:07:26.121Z</published>
    <updated>2018-01-30T07:07:26.130Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>Registry:官方提供用于构建私有镜像仓库的工具  </p></blockquote><h3 id="Registry-基本配置"><a href="#Registry-基本配置" class="headerlink" title="Registry 基本配置"></a>Registry 基本配置</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">docker run -d</span><br><span class="line">  -e REGISTRY_HTTP_ADDR =0.0.0.0:5001        <span class="comment">#registry侦听容器内的5001端口</span></span><br><span class="line">  -p 5001:5001                               <span class="comment">#主机端口:容器内端口     </span></span><br><span class="line">  --name                                     <span class="comment">#设置容器名称</span></span><br><span class="line">  --restart=always                           <span class="comment">#为registry配置重新启动策略</span></span><br><span class="line">  -v /mnt/registry:/var/lib/refistry         <span class="comment">#主机目录:容器目录  设置目录挂载</span></span><br><span class="line">  registry:2                                                                                                                                                                                                             registry镜像名</span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="运行-Registry"><a href="#运行-Registry" class="headerlink" title="运行 Registry"></a>运行 Registry</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#下载registry镜像</span></span><br><span class="line">  docker pull registry.docker-cn.com/library/registry:2</span><br><span class="line">  docker tag registry.docker-cn.com/library/registry:2 registry:2  标记镜像 </span><br><span class="line"></span><br><span class="line"><span class="comment">#启动registry镜像</span></span><br><span class="line">  docker run -d -p 5000:5000 --name registry registry:2</span><br><span class="line"></span><br><span class="line"><span class="comment">#标记镜像，指向本地registry</span></span><br><span class="line">  docker tag lianyi/ubuntu:v1.0 localhost:5000/ubuntu:v1.0</span><br><span class="line"></span><br><span class="line"><span class="comment">#推送镜像到本地registry</span></span><br><span class="line">  docker push localhost:5000/ubuntu:v1.0</span><br><span class="line"></span><br><span class="line"><span class="comment">#删除本地缓存 images</span></span><br><span class="line">  docker image rm localhost:5000/ubuntu:v1.0</span><br><span class="line">  </span><br><span class="line"><span class="comment">#关闭本地registry 并删除所有数据</span></span><br><span class="line">  docker stop registry &amp;&amp; docker rm -v registry</span><br></pre></td></tr></table></figure><h3 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h3><p><a href="https://docs.docker.com/registry/" target="_blank" rel="noopener">官方文档</a><br><a href="https://docs.docker.com/registry/deploying/#get-a-certificate" target="_blank" rel="noopener">开启https</a><br><a href="https://docs.docker.com/registry/deploying/#native-basic-auth" target="_blank" rel="noopener">基本认证</a><br><a href="https://docs.docker.com/registry/deploying/#deploy-your-registry-using-a-compose-file" target="_blank" rel="noopener">使用Compose文件部署registry</a></p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;Registry:官方提供用于构建私有镜像仓库的工具  &lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;Registry-基本配置&quot;&gt;&lt;a href=&quot;#Registry-基本配置&quot; class=&quot;headerlink&quot; title=&quot;Registry 基本配置&quot;&gt;&lt;/a&gt;Registry 基本配置&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;docker run -d&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  -e REGISTRY_HTTP_ADDR =0.0.0.0:5001        &lt;span class=&quot;comment&quot;&gt;#registry侦听容器内的5001端口&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  -p 5001:5001                               &lt;span class=&quot;comment&quot;&gt;#主机端口:容器内端口     &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  --name                                     &lt;span class=&quot;comment&quot;&gt;#设置容器名称&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  --restart=always                           &lt;span class=&quot;comment&quot;&gt;#为registry配置重新启动策略&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  -v /mnt/registry:/var/lib/refistry         &lt;span class=&quot;comment&quot;&gt;#主机目录:容器目录  设置目录挂载&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  registry:2                                                                                                                                                                                                             registry镜像名&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="运维" scheme="http://yoursite.com/categories/Devops/"/>
    
    
      <category term="Docker" scheme="http://yoursite.com/tags/Docker/"/>
    
  </entry>
  
  <entry>
    <title>Docker Hub (公有仓库)</title>
    <link href="http://yoursite.com/Devops_Docker_hub.html"/>
    <id>http://yoursite.com/Devops_Docker_hub.html</id>
    <published>2018-01-30T07:00:53.133Z</published>
    <updated>2018-01-30T07:00:53.134Z</updated>
    
    <content type="html"><![CDATA[<h3 id="网址"><a href="#网址" class="headerlink" title="网址"></a>网址</h3><p><a href="https://hub.docker.com/" target="_blank" rel="noopener">Docker Hub</a></p><h3 id="登陆"><a href="#登陆" class="headerlink" title="登陆"></a>登陆</h3><p>  docker login 命令来输入用户名、密码和邮箱完成注册和登陆<br>  注册成功后，本地用户目录的.dockercfg中奖保存用户的认证信息</p><a id="more"></a><h3 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a>基本操作</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker search    <span class="comment">#查找官方仓库中的镜像</span></span><br><span class="line">docker pull      <span class="comment">#下载镜像到本地</span></span><br><span class="line">docker push      <span class="comment">#上传镜像到仓库</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;网址&quot;&gt;&lt;a href=&quot;#网址&quot; class=&quot;headerlink&quot; title=&quot;网址&quot;&gt;&lt;/a&gt;网址&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;https://hub.docker.com/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Docker Hub&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;登陆&quot;&gt;&lt;a href=&quot;#登陆&quot; class=&quot;headerlink&quot; title=&quot;登陆&quot;&gt;&lt;/a&gt;登陆&lt;/h3&gt;&lt;p&gt;  docker login 命令来输入用户名、密码和邮箱完成注册和登陆&lt;br&gt;  注册成功后，本地用户目录的.dockercfg中奖保存用户的认证信息&lt;/p&gt;
    
    </summary>
    
      <category term="运维" scheme="http://yoursite.com/categories/Devops/"/>
    
    
      <category term="Docker" scheme="http://yoursite.com/tags/Docker/"/>
    
  </entry>
  
  <entry>
    <title>Docker Container (容器)</title>
    <link href="http://yoursite.com/Devops_Docker_container.html"/>
    <id>http://yoursite.com/Devops_Docker_container.html</id>
    <published>2018-01-30T06:49:26.465Z</published>
    <updated>2018-01-30T06:49:26.469Z</updated>
    
    <content type="html"><![CDATA[<h3 id="运行容器"><a href="#运行容器" class="headerlink" title="运行容器"></a>运行容器</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#基于镜像运行容器</span></span><br><span class="line"> docker run -t -i ubuntu:14.04 /bin/bash</span><br><span class="line">    <span class="comment">#-t   分配一个伪终端并与容器绑定  </span></span><br><span class="line">    <span class="comment">#-i    让容器标准输入保持打开</span></span><br><span class="line">    <span class="comment">#-d   在后台运行容器并打印容器ID</span></span><br><span class="line">    <span class="comment">#--name  为容器自定义命名</span></span><br><span class="line">    <span class="comment">#--rm      容器终止后立刻删除，--rm与-d参数不能同时使用</span></span><br><span class="line">    <span class="comment">#容器是一个服务 运行/bin/bash有将其做虚拟机使用的悬疑。。。 </span></span><br><span class="line"> </span><br><span class="line"><span class="comment">#查看运行容器</span></span><br><span class="line">docker ps</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看终止状态容器</span></span><br><span class="line">docker ps -a</span><br><span class="line"></span><br><span class="line"><span class="comment">#停止容器</span></span><br><span class="line">docker stop [CONTAINER ID]</span><br><span class="line"></span><br><span class="line"><span class="comment">#启动已终止容器</span></span><br><span class="line">docker start  [CONTAINER ID]</span><br><span class="line"></span><br><span class="line"><span class="comment">#重启容器</span></span><br><span class="line">docker restart</span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="进入容器"><a href="#进入容器" class="headerlink" title="进入容器"></a>进入容器</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#attach命令</span></span><br><span class="line"><span class="comment">#当多个窗口同时attach到一个容器的时候，所有窗口都会同步显示</span></span><br><span class="line">  docker attach [CONTAINER ID/NAMES]</span><br><span class="line">  </span><br><span class="line"><span class="comment">#nsenter命令</span></span><br><span class="line"><span class="comment">#在util-linux包2.23版本后包含，若无需安装</span></span><br><span class="line"><span class="comment">#nsenter 可以访问另一个进程的名字空间，需root权限</span></span><br><span class="line">  PID=$(docker inspect --format <span class="string">"&#123;&#123; .State.Pid &#125;&#125;"</span> [CONTAINER ID])</span><br><span class="line">  nsenter --target <span class="variable">$PID</span> --mount --uts --ipc --net --pid</span><br></pre></td></tr></table></figure><h3 id="删除容器"><a href="#删除容器" class="headerlink" title="删除容器"></a>删除容器</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#删除在运行的容器，可以添-f参数</span></span><br><span class="line">docker rm [CONTAINER ID]</span><br></pre></td></tr></table></figure><h3 id="其它相关命令"><a href="#其它相关命令" class="headerlink" title="其它相关命令"></a>其它相关命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#守护态运行</span></span><br><span class="line">  <span class="comment">#启动时添加 -d 参数</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#查看容器名字</span></span><br><span class="line">  docker inspect -f <span class="string">"&#123;&#123; .Name &#125;&#125;"</span> [CONTAINER ID]</span><br><span class="line">  </span><br><span class="line"><span class="comment">#获取容器的输出信息</span></span><br><span class="line">  docker logs [docker names]</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;运行容器&quot;&gt;&lt;a href=&quot;#运行容器&quot; class=&quot;headerlink&quot; title=&quot;运行容器&quot;&gt;&lt;/a&gt;运行容器&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#基于镜像运行容器&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; docker run -t -i ubuntu:14.04 /bin/bash&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;#-t   分配一个伪终端并与容器绑定  &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;#-i    让容器标准输入保持打开&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;#-d   在后台运行容器并打印容器ID&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;#--name  为容器自定义命名&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;#--rm      容器终止后立刻删除，--rm与-d参数不能同时使用&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;#容器是一个服务 运行/bin/bash有将其做虚拟机使用的悬疑。。。 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#查看运行容器&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;docker ps&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#查看终止状态容器&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;docker ps -a&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#停止容器&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;docker stop [CONTAINER ID]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#启动已终止容器&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;docker start  [CONTAINER ID]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#重启容器&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;docker restart&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="运维" scheme="http://yoursite.com/categories/Devops/"/>
    
    
      <category term="Docker" scheme="http://yoursite.com/tags/Docker/"/>
    
  </entry>
  
  <entry>
    <title>Docker CE 安装</title>
    <link href="http://yoursite.com/Devops_Docker_install.html"/>
    <id>http://yoursite.com/Devops_Docker_install.html</id>
    <published>2018-01-30T06:39:49.552Z</published>
    <updated>2018-01-30T06:39:49.553Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>安装步骤仅为参考，疑问请参考官方文档</p></blockquote><h3 id="系统要求"><a href="#系统要求" class="headerlink" title="系统要求"></a>系统要求</h3><ul><li>Zesty 17.04</li><li>Xenial 16.04 (LTS)</li><li>Trusty 14.04 (LTS)</li></ul><h3 id="卸载旧版本Docker"><a href="#卸载旧版本Docker" class="headerlink" title="卸载旧版本Docker"></a>卸载旧版本Docker</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get remove docker &lt;!-- more --&gt;docker-engine docker.io</span><br></pre></td></tr></table></figure><h3 id="更换默认存储驱动程序"><a href="#更换默认存储驱动程序" class="headerlink" title="更换默认存储驱动程序"></a>更换默认存储驱动程序</h3><p>Docker默认使用<code>overlay2</code>，官方建议替换为<code>aufs</code>，在此未作配置修改。</p><h3 id="安装Docker-CE"><a href="#安装Docker-CE" class="headerlink" title="安装Docker CE"></a>安装Docker CE</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span>更新包索引</span><br><span class="line">sudo apt-get update</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span>安装软件包,以允许apt通过HTTPS使用存储库</span><br><span class="line">sudo apt-get install \</span><br><span class="line">    apt-transport-https \</span><br><span class="line">    ca-certificates \</span><br><span class="line">    curl \</span><br><span class="line">    software-properties-common</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span>添加Docker的官方GPG密钥</span><br><span class="line">curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span>设置软件源信息</span><br><span class="line">sudo add-apt-repository "deb [arch=amd64] http://mirrors.aliyun.com/docker-ce/linux/ubuntu $(lsb_release -cs) stable"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span>更新并安装Docker CE</span><br><span class="line">sudo apt-get -y update</span><br><span class="line">sudo apt-get -y install docker-ce</span><br></pre></td></tr></table></figure><h3 id="安装指定版本的Docker-CE"><a href="#安装指定版本的Docker-CE" class="headerlink" title="安装指定版本的Docker CE"></a>安装指定版本的Docker CE</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span>查找Docker-CE的版本</span><br><span class="line">apt-cache madison docker-ce</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span>安装指定版本的Docker CE</span><br><span class="line">sudo apt-get -y install docker-ce=[VERSION]</span><br></pre></td></tr></table></figure><h3 id="docker授权"><a href="#docker授权" class="headerlink" title="docker授权"></a>docker授权</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span>将操作 docker 用户，加入 docker 组，为该用户赋予操作 docker 的权限</span><br><span class="line">sudo usermod -aG docker $USER</span><br></pre></td></tr></table></figure><h3 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h3><p><a href="https://docs.docker.com/engine/installation/linux/docker-ce/ubuntu/#install-from-a-package" title="Docker Guides" target="_blank" rel="noopener">Docker Guides</a><br><a href="https://yq.aliyun.com/articles/110806" title="Docker CE 镜像源站" target="_blank" rel="noopener">Aliyun Docker CE 镜像源站</a><br><a href="https://docs.docker.com/engine/userguide/storagedriver/aufs-driver/" title="Docker Guides AUFS storage" target="_blank" rel="noopener">Docker Guides AUFS storage</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;安装步骤仅为参考，疑问请参考官方文档&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;系统要求&quot;&gt;&lt;a href=&quot;#系统要求&quot; class=&quot;headerlink&quot; title=&quot;系统要求&quot;&gt;&lt;/a&gt;系统要求&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;Zes
      
    
    </summary>
    
      <category term="运维" scheme="http://yoursite.com/categories/Devops/"/>
    
    
      <category term="Docker" scheme="http://yoursite.com/tags/Docker/"/>
    
  </entry>
  
  <entry>
    <title>ELK日志平台</title>
    <link href="http://yoursite.com/Devops_ELK_base.html"/>
    <id>http://yoursite.com/Devops_ELK_base.html</id>
    <published>2018-01-30T06:39:38.386Z</published>
    <updated>2018-01-30T06:39:38.388Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ELK简介"><a href="#ELK简介" class="headerlink" title="ELK简介"></a>ELK简介</h3><p>ELK:集中式WEB日志收集平台<br>ELK=ElasticSearch+Logstash+Kiabana</p><ol><li>ElasticSearch：开源分布式搜索引擎</li><li>Logstash：开源日志收集、过滤工具</li><li>Kiabana：提供web界面<a id="more"></a></li></ol><blockquote><p>未写完 先看一下 jenkins </p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;ELK简介&quot;&gt;&lt;a href=&quot;#ELK简介&quot; class=&quot;headerlink&quot; title=&quot;ELK简介&quot;&gt;&lt;/a&gt;ELK简介&lt;/h3&gt;&lt;p&gt;ELK:集中式WEB日志收集平台&lt;br&gt;ELK=ElasticSearch+Logstash+Kiabana&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ElasticSearch：开源分布式搜索引擎&lt;/li&gt;
&lt;li&gt;Logstash：开源日志收集、过滤工具&lt;/li&gt;
&lt;li&gt;Kiabana：提供web界面
    
    </summary>
    
      <category term="运维" scheme="http://yoursite.com/categories/Devops/"/>
    
    
      <category term="ELK" scheme="http://yoursite.com/tags/Elk/"/>
    
  </entry>
  
  <entry>
    <title>Docker Image (镜像)</title>
    <link href="http://yoursite.com/Devops_Docker_image.html"/>
    <id>http://yoursite.com/Devops_Docker_image.html</id>
    <published>2018-01-30T06:35:05.385Z</published>
    <updated>2018-01-30T06:35:05.389Z</updated>
    
    <content type="html"><![CDATA[<h3 id="获取镜像"><a href="#获取镜像" class="headerlink" title="获取镜像"></a>获取镜像</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker pull [选项] [Docker Registry地址]&lt;仓库名&gt;:&lt;标签&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">#Registry地址 &lt;域名/IP&gt;[:端口号]  默认地址是Docker Hub</span></span><br><span class="line"><span class="comment">#仓库名 &lt;用户名&gt;/&lt;软件名&gt;  对于Docker Hub 不给出仓库名默认为Library(官网镜像)</span></span><br><span class="line"><span class="comment">#docker pull registry.docker-cn.com/library/ubuntu:14.04</span></span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="列出镜像"><a href="#列出镜像" class="headerlink" title="列出镜像"></a>列出镜像</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#列出顶级镜像</span></span><br><span class="line">docker images</span><br><span class="line"></span><br><span class="line"><span class="comment">#列出中间镜像</span></span><br><span class="line">docker images -a </span><br><span class="line"></span><br><span class="line"><span class="comment">#列出部分镜像</span></span><br><span class="line">docker images 仓库名 标签</span><br><span class="line"></span><br><span class="line"><span class="comment"># 虚悬镜像</span></span><br><span class="line"><span class="comment">#仓库名和标签均为&lt;none&gt;的镜像</span></span><br><span class="line"><span class="comment">#删除虚悬镜像</span></span><br><span class="line">docker rmi $(docker images -q -f dangling=<span class="literal">true</span>)</span><br></pre></td></tr></table></figure><h3 id="创建镜像"><a href="#创建镜像" class="headerlink" title="创建镜像"></a>创建镜像</h3><p>利用DockerFile创建镜像</p><h3 id="存入和载出镜像"><a href="#存入和载出镜像" class="headerlink" title="存入和载出镜像"></a>存入和载出镜像</h3><p>利用仓库来存入和载出镜像</p><h3 id="删除本地镜像"><a href="#删除本地镜像" class="headerlink" title="删除本地镜像"></a>删除本地镜像</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#删除镜像之前使用 docker rm 删除依赖该镜像的所有容器</span></span><br><span class="line">docker rmi   镜像名:标签</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;获取镜像&quot;&gt;&lt;a href=&quot;#获取镜像&quot; class=&quot;headerlink&quot; title=&quot;获取镜像&quot;&gt;&lt;/a&gt;获取镜像&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;docker pull [选项] [Docker Registry地址]&amp;lt;仓库名&amp;gt;:&amp;lt;标签&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#Registry地址 &amp;lt;域名/IP&amp;gt;[:端口号]  默认地址是Docker Hub&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#仓库名 &amp;lt;用户名&amp;gt;/&amp;lt;软件名&amp;gt;  对于Docker Hub 不给出仓库名默认为Library(官网镜像)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#docker pull registry.docker-cn.com/library/ubuntu:14.04&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="运维" scheme="http://yoursite.com/categories/Devops/"/>
    
    
      <category term="Docker" scheme="http://yoursite.com/tags/Docker/"/>
    
  </entry>
  
  <entry>
    <title>Docker 镜像加速器</title>
    <link href="http://yoursite.com/Devops_Docker_Image_accelerator.html"/>
    <id>http://yoursite.com/Devops_Docker_Image_accelerator.html</id>
    <published>2018-01-30T06:23:40.518Z</published>
    <updated>2018-01-30T06:23:40.521Z</updated>
    
    <content type="html"><![CDATA[<h3 id="常用加速器"><a href="#常用加速器" class="headerlink" title="常用加速器"></a>常用加速器</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Docker 官方的中国镜像加速器</span></span><br><span class="line">https://registry.docker-cn.com</span><br><span class="line"><span class="comment">#中国科技大学的镜像加速器</span></span><br><span class="line">https://docker.mirrors.ustc.edu.cn/</span><br><span class="line"><span class="comment">#其它（需登陆）</span></span><br><span class="line">https://cr.console.aliyun.com/<span class="comment">#/accelerator #阿里云加速器</span></span><br><span class="line">https://www.daocloud.io/mirror<span class="comment">#accelerator-doc #DaoCloud加速器</span></span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="Ubuntu-14-04-配置加速器（或其它使用-Upstart-的系统）"><a href="#Ubuntu-14-04-配置加速器（或其它使用-Upstart-的系统）" class="headerlink" title="Ubuntu 14.04 配置加速器（或其它使用 Upstart 的系统）"></a>Ubuntu 14.04 配置加速器（或其它使用 Upstart 的系统）</h3><ol><li><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">编辑配置文件</span></span><br><span class="line">sudo vim /etc/default/docker</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">添加加速器地址</span></span><br><span class="line">DOCKER_OPTS="--registry-mirror=https://registry.docker-cn.com"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">重启 Docker 引擎</span></span><br><span class="line">sudo service docker restart</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">查看配置</span></span><br><span class="line">sudo ps -ef | grep dockerd</span><br></pre></td></tr></table></figure></li></ol><h3 id="Ubuntu-16-04-或-CentOS-7-配置加速器（或其它使用-Systemd-的系统）"><a href="#Ubuntu-16-04-或-CentOS-7-配置加速器（或其它使用-Systemd-的系统）" class="headerlink" title="Ubuntu 16.04 或 CentOS 7 配置加速器（或其它使用 Systemd 的系统）"></a>Ubuntu 16.04 或 CentOS 7 配置加速器（或其它使用 Systemd 的系统）</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">编辑配置文件</span></span><br><span class="line">sudo vi /etc/systemd/system/multi-user.target.wants/docker.service</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">添加加速器地址</span></span><br><span class="line">ExecStart=/usr/bin/dockerd --registry-mirror=https://registry.docker-cn.com</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">重新加载配置并启动服务</span></span><br><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl restart docker</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">查看配置</span></span><br><span class="line">sudo ps -ef | grep dockerd</span><br></pre></td></tr></table></figure><h3 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h3><p><a href="https://blog.lab99.org/post/docker-2016-07-14-faq.html#ubuntu-14-04-pei-zhi-jia-su-qi-huo-qi-ta-shi-yong-upstart-de-xi-tong" title="Docker问答录" target="_blank" rel="noopener">Docker问答录</a></p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;常用加速器&quot;&gt;&lt;a href=&quot;#常用加速器&quot; class=&quot;headerlink&quot; title=&quot;常用加速器&quot;&gt;&lt;/a&gt;常用加速器&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#Docker 官方的中国镜像加速器&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;https://registry.docker-cn.com&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#中国科技大学的镜像加速器&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;https://docker.mirrors.ustc.edu.cn/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#其它（需登陆）&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;https://cr.console.aliyun.com/&lt;span class=&quot;comment&quot;&gt;#/accelerator #阿里云加速器&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;https://www.daocloud.io/mirror&lt;span class=&quot;comment&quot;&gt;#accelerator-doc #DaoCloud加速器&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="运维" scheme="http://yoursite.com/categories/Devops/"/>
    
    
      <category term="Docker" scheme="http://yoursite.com/tags/Docker/"/>
    
  </entry>
  
  <entry>
    <title>Docker概念</title>
    <link href="http://yoursite.com/Devops_Docker_base.html"/>
    <id>http://yoursite.com/Devops_Docker_base.html</id>
    <published>2018-01-30T06:22:35.684Z</published>
    <updated>2018-01-30T06:22:35.688Z</updated>
    
    <content type="html"><![CDATA[<h3 id="镜像"><a href="#镜像" class="headerlink" title="镜像"></a>镜像</h3><ul><li>一个特殊的文件系统，包含了操作系统完整的root文件系统        </li><li>提供容器运行时所需的程序、库、资源、配置等文件</li><li>包含了一些为运行时准备的一些配置参数（如匿名卷、环境变量、用户等）<a id="more"></a></li></ul><h3 id="容器"><a href="#容器" class="headerlink" title="容器"></a>容器</h3><ul><li>镜像运行时的实体。容器可以被创建、启动、停止、删除、暂停</li><li>实质是进程，运行于属于自己的独立的命名空间</li><li>容器进程直接运行于宿主内核中</li><li>运行时会创建一个为容器运行时读写而准备的存储层：容器存储层</li></ul><h3 id="仓库"><a href="#仓库" class="headerlink" title="仓库"></a>仓库</h3><ul><li>集中的存储、分发镜像</li><li>可包含多个仓库，每个仓库可以包含多个标签，每个标签对应一个镜像</li><li>使用&lt;仓库名&gt;:&lt;标签&gt; 指定具体软件版本的镜像，不给出标签默认使用latest标签</li></ul><h3 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h3><p><a href="https://doc.yonyoucloud.com/doc/docker_practice/basic_concept/index.html" title="Docker —— 从入门到实践" target="_blank" rel="noopener">Docker —— 从入门到实践</a></p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;镜像&quot;&gt;&lt;a href=&quot;#镜像&quot; class=&quot;headerlink&quot; title=&quot;镜像&quot;&gt;&lt;/a&gt;镜像&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;一个特殊的文件系统，包含了操作系统完整的root文件系统        &lt;/li&gt;
&lt;li&gt;提供容器运行时所需的程序、库、资源、配置等文件&lt;/li&gt;
&lt;li&gt;包含了一些为运行时准备的一些配置参数（如匿名卷、环境变量、用户等）
    
    </summary>
    
      <category term="运维" scheme="http://yoursite.com/categories/Devops/"/>
    
    
      <category term="Docker" scheme="http://yoursite.com/tags/Docker/"/>
    
  </entry>
  
  <entry>
    <title>Linux 中ASCII显示图片</title>
    <link href="http://yoursite.com/Linux_image.html"/>
    <id>http://yoursite.com/Linux_image.html</id>
    <published>2018-01-30T05:47:44.529Z</published>
    <updated>2018-01-30T05:47:44.532Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>在ubuntu中实现，且并没有什么实用价值的小技能</p></blockquote><h3 id="安装ImageMagick"><a href="#安装ImageMagick" class="headerlink" title="安装ImageMagick"></a>安装ImageMagick</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo  apt-get install imagemagick</span><br></pre></td></tr></table></figure><h3 id="安装aview"><a href="#安装aview" class="headerlink" title="安装aview"></a>安装aview</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install aview</span><br></pre></td></tr></table></figure><h3 id="执行转换命令"><a href="#执行转换命令" class="headerlink" title="执行转换命令"></a>执行转换命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span>psb.jpg 为需要转换的图片</span><br><span class="line">asciiview psb.jpg -driver curses</span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="效果展示"><a href="#效果展示" class="headerlink" title="效果展示"></a>效果展示</h3><p><img src="https://ws1.sinaimg.cn/large/006Xrlj6gy1flbrpat9goj30sq0ezqbq.jpg" alt=""></p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;在ubuntu中实现，且并没有什么实用价值的小技能&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;安装ImageMagick&quot;&gt;&lt;a href=&quot;#安装ImageMagick&quot; class=&quot;headerlink&quot; title=&quot;安装ImageMagick&quot;&gt;&lt;/a&gt;安装ImageMagick&lt;/h3&gt;&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo  apt-get install imagemagick&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;安装aview&quot;&gt;&lt;a href=&quot;#安装aview&quot; class=&quot;headerlink&quot; title=&quot;安装aview&quot;&gt;&lt;/a&gt;安装aview&lt;/h3&gt;&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo apt-get install aview&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;执行转换命令&quot;&gt;&lt;a href=&quot;#执行转换命令&quot; class=&quot;headerlink&quot; title=&quot;执行转换命令&quot;&gt;&lt;/a&gt;执行转换命令&lt;/h3&gt;&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;/span&gt;psb.jpg 为需要转换的图片&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;asciiview psb.jpg -driver curses&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="Linux" scheme="http://yoursite.com/categories/Linux/"/>
    
    
      <category term="OS" scheme="http://yoursite.com/tags/OS/"/>
    
  </entry>
  
  <entry>
    <title>Linux sudo详解</title>
    <link href="http://yoursite.com/Linux_sudo.html"/>
    <id>http://yoursite.com/Linux_sudo.html</id>
    <published>2018-01-29T05:47:14.389Z</published>
    <updated>2018-01-29T05:47:14.393Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>使得用户以其他用户的身份通过主机执行命令</p></blockquote><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#默认保存权限5分钟</span></span><br><span class="line"><span class="comment">#配置文件</span></span><br><span class="line">/etc/sudoers</span><br><span class="line"></span><br><span class="line"><span class="comment">#语法</span></span><br><span class="line"><span class="comment">#谁   在那个主机=(以谁的身份)  执行什么命令</span></span><br><span class="line">who   which_hosts=(runas)      commands  </span><br><span class="line">eg：</span><br><span class="line"> xx   ALL=(root)  /usr/sbin/useradd,/usr/sbin/usermod</span><br><span class="line">sudo</span><br><span class="line">  -k   <span class="comment">#不保存权限</span></span><br><span class="line">  -l   <span class="comment">#列出当前用户可以使用的所有的sudo类命令</span></span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="别名"><a href="#别名" class="headerlink" title="别名"></a>别名</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#别名必须全部而且只能使用大写英文字母</span></span><br><span class="line"><span class="comment">#可使用！ 取反</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#用户别名</span></span><br><span class="line">who:User_Alias</span><br><span class="line">User_Alias USERADMIN=</span><br><span class="line">    <span class="comment">#用户的用户名</span></span><br><span class="line">    <span class="comment">#组名，使用%引导</span></span><br><span class="line">    <span class="comment">#还可以包含其它已经定义的用户别名</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#主机别名</span></span><br><span class="line">which_hosts:Host_Alias</span><br><span class="line">    <span class="comment">#主机名</span></span><br><span class="line">    <span class="comment">#ip</span></span><br><span class="line">    <span class="comment">#网络地址</span></span><br><span class="line">    <span class="comment">#其他主机别名</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">#运行用户别名</span></span><br><span class="line"> runas:Runas_Alias</span><br><span class="line">    <span class="comment">#用户名</span></span><br><span class="line">    <span class="comment">#%组名</span></span><br><span class="line">    <span class="comment">#其他Runas别名</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">#命令别名</span></span><br><span class="line"><span class="built_in">command</span>:Cmnd_Alias</span><br><span class="line">    <span class="comment">#命令路径</span></span><br><span class="line">    <span class="comment">#目录(此目录内的所有命令)</span></span><br><span class="line">    <span class="comment">#其他事先定义过的命令别名</span></span><br></pre></td></tr></table></figure><blockquote><p>已经看不懂了…..</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;使得用户以其他用户的身份通过主机执行命令&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;简介&quot;&gt;&lt;a href=&quot;#简介&quot; class=&quot;headerlink&quot; title=&quot;简介&quot;&gt;&lt;/a&gt;简介&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#默认保存权限5分钟&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#配置文件&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/etc/sudoers&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#语法&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#谁   在那个主机=(以谁的身份)  执行什么命令&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;who   which_hosts=(runas)      commands  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;eg：&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; xx   ALL=(root)  /usr/sbin/useradd,/usr/sbin/usermod&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  -k   &lt;span class=&quot;comment&quot;&gt;#不保存权限&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  -l   &lt;span class=&quot;comment&quot;&gt;#列出当前用户可以使用的所有的sudo类命令&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="Linux" scheme="http://yoursite.com/categories/Linux/"/>
    
    
      <category term="OS" scheme="http://yoursite.com/tags/OS/"/>
    
  </entry>
  
  <entry>
    <title>Linux 禁止root远程登陆</title>
    <link href="http://yoursite.com/Linux_root.html"/>
    <id>http://yoursite.com/Linux_root.html</id>
    <published>2018-01-29T05:38:56.005Z</published>
    <updated>2018-01-29T05:38:56.006Z</updated>
    
    <content type="html"><![CDATA[<h3 id="创建新用户"><a href="#创建新用户" class="headerlink" title="创建新用户"></a>创建新用户</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd xx</span><br></pre></td></tr></table></figure><h3 id="添加用户到root组"><a href="#添加用户到root组" class="headerlink" title="添加用户到root组"></a>添加用户到root组</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usermod -g root xx</span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="添加用户sudo权限"><a href="#添加用户sudo权限" class="headerlink" title="添加用户sudo权限"></a>添加用户sudo权限</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/sudoers</span><br><span class="line"> xx all all</span><br></pre></td></tr></table></figure><h3 id="限制ssh"><a href="#限制ssh" class="headerlink" title="限制ssh"></a>限制ssh</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/ssh/sshd_config</span><br><span class="line"><span class="comment">#PermitRootLogin yes 取消注释改为no</span></span><br></pre></td></tr></table></figure><h3 id="重启ssh"><a href="#重启ssh" class="headerlink" title="重启ssh"></a>重启ssh</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#centos6</span></span><br><span class="line">service sshd reload</span><br><span class="line"><span class="comment">#centos7</span></span><br><span class="line">systemctl restart sshd.service</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;创建新用户&quot;&gt;&lt;a href=&quot;#创建新用户&quot; class=&quot;headerlink&quot; title=&quot;创建新用户&quot;&gt;&lt;/a&gt;创建新用户&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;useradd xx&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;添加用户到root组&quot;&gt;&lt;a href=&quot;#添加用户到root组&quot; class=&quot;headerlink&quot; title=&quot;添加用户到root组&quot;&gt;&lt;/a&gt;添加用户到root组&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;usermod -g root xx&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="Linux" scheme="http://yoursite.com/categories/Linux/"/>
    
    
      <category term="OS" scheme="http://yoursite.com/tags/OS/"/>
    
  </entry>
  
  <entry>
    <title>Linux 免密登陆</title>
    <link href="http://yoursite.com/Linux_ssh.html"/>
    <id>http://yoursite.com/Linux_ssh.html</id>
    <published>2018-01-29T05:34:17.144Z</published>
    <updated>2018-01-29T05:34:17.145Z</updated>
    
    <content type="html"><![CDATA[<h3 id="配置Linux主机ssh无密码访问"><a href="#配置Linux主机ssh无密码访问" class="headerlink" title="配置Linux主机ssh无密码访问"></a>配置Linux主机ssh无密码访问</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#使用ssh-keygen与ssh-copy-id实现快速证书的生成及公钥下发</span></span><br><span class="line"><span class="comment">#生成一对密钥</span></span><br><span class="line">  ssh-keygen   </span><br><span class="line"><span class="comment">#下发生成的公钥</span></span><br><span class="line">  ssh-copy-id username@ip </span><br><span class="line">  or</span><br><span class="line">  ssh-copy-id -i /root/.ssh/id_rsa.pub root@ip</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;配置Linux主机ssh无密码访问&quot;&gt;&lt;a href=&quot;#配置Linux主机ssh无密码访问&quot; class=&quot;headerlink&quot; title=&quot;配置Linux主机ssh无密码访问&quot;&gt;&lt;/a&gt;配置Linux主机ssh无密码访问&lt;/h3&gt;&lt;figure class
      
    
    </summary>
    
      <category term="Linux" scheme="http://yoursite.com/categories/Linux/"/>
    
    
      <category term="OS" scheme="http://yoursite.com/tags/OS/"/>
    
  </entry>
  
  <entry>
    <title>Linux firewalld设置</title>
    <link href="http://yoursite.com/Linux_firewall.html"/>
    <id>http://yoursite.com/Linux_firewall.html</id>
    <published>2018-01-29T05:31:10.389Z</published>
    <updated>2018-01-29T05:31:10.390Z</updated>
    
    <content type="html"><![CDATA[<h3 id="firewalld-基本使用"><a href="#firewalld-基本使用" class="headerlink" title="firewalld 基本使用"></a>firewalld 基本使用</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#启动 </span></span><br><span class="line">systemctl start firewalld</span><br><span class="line"><span class="comment">#停止</span></span><br><span class="line">systemctl <span class="built_in">disable</span> firewalld</span><br><span class="line"><span class="comment">#查看状态 </span></span><br><span class="line">systemctl status firewalld </span><br><span class="line"><span class="comment">#重启</span></span><br><span class="line">systemctl restart firewalld</span><br><span class="line"><span class="comment">#禁用 </span></span><br><span class="line">systemctl stop firewalld</span><br><span class="line"><span class="comment">#开机启动</span></span><br><span class="line">systemctl <span class="built_in">enable</span> firewalld</span><br><span class="line"><span class="comment">#开机禁用</span></span><br><span class="line">systemctl <span class="built_in">disable</span> firewalld</span><br><span class="line"><span class="comment">#是否开机启动</span></span><br><span class="line">systemctl is-enabled firewalld</span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="配置firewalld-cmd"><a href="#配置firewalld-cmd" class="headerlink" title="配置firewalld-cmd"></a>配置firewalld-cmd</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看版本</span></span><br><span class="line">firewall-cmd --version</span><br><span class="line"><span class="comment">#查看帮助</span></span><br><span class="line">firewall-cmd --<span class="built_in">help</span></span><br><span class="line"><span class="comment">#显示状态</span></span><br><span class="line">firewall-cmd --state</span><br><span class="line"><span class="comment">#查看所有打开的端口</span></span><br><span class="line">firewall-cmd --zone=public --list-ports</span><br><span class="line"><span class="comment">#更新防火墙规则</span></span><br><span class="line">firewall-cmd --reload</span><br><span class="line"><span class="comment">#查看区域信息</span></span><br><span class="line">firewall-cmd --get-active-zones</span><br><span class="line"><span class="comment">#查看指定接口所属区域</span></span><br><span class="line">firewall-cmd --get-zone-of-interface=eth0</span><br><span class="line"><span class="comment">#拒绝所有</span></span><br><span class="line">firewall-cmd --panic-on</span><br><span class="line"><span class="comment">#取消拒绝状态</span></span><br><span class="line">firewall-cmd --panic-off</span><br><span class="line"><span class="comment">#查看是否拒绝</span></span><br><span class="line">firewall-cmd --query-panic</span><br></pre></td></tr></table></figure><h3 id="端口"><a href="#端口" class="headerlink" title="端口"></a>端口</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#添加  （--permanent永久生效，没有此参数重启后失效）</span></span><br><span class="line">firewall-cmd --zone=public --add-port=80/tcp --permanent    </span><br><span class="line"><span class="comment">#重新载入</span></span><br><span class="line">firewall-cmd --reload</span><br><span class="line"><span class="comment">#查看</span></span><br><span class="line">firewall-cmd --zone= public --query-port=80/tcp</span><br><span class="line"><span class="comment">#删除</span></span><br><span class="line">firewall-cmd --zone= public --remove-port=80/tcp --permanent</span><br></pre></td></tr></table></figure><h3 id="服务"><a href="#服务" class="headerlink" title="服务"></a>服务</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#添加</span></span><br><span class="line">firewall-cmd --add-service=ftp --zone=public  --permanent</span><br><span class="line"><span class="comment">#删除</span></span><br><span class="line">firewall-cmd --remove-service=ftp --zone=public</span><br><span class="line"><span class="comment">#查看服务是否被允许</span></span><br><span class="line">firewall-cmd --query-service=http --zone=public</span><br></pre></td></tr></table></figure><h3 id="富规则"><a href="#富规则" class="headerlink" title="富规则"></a>富规则</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看</span></span><br><span class="line">firewall-cmd --list-rich-rules</span><br><span class="line"><span class="comment">#添加</span></span><br><span class="line"> <span class="comment">#禁止特定端口访问ssh/22</span></span><br><span class="line">  firewall-cmd --permanent --zone=public --add-rich-rule=<span class="string">"rule family=ipv4 source address='x.x.x.x/24' service name='ssh' drop"</span></span><br><span class="line">  or</span><br><span class="line">  firewall-cmd --permanent --zone=public --add-rich-rule=<span class="string">"rule family='ipv4' source address='x.x.x.x/24' service name='ssh' reject"</span></span><br><span class="line">  firewall-cmd --permanent --zone=public --add-rich-rule=<span class="string">"rule family='ipv4' source address='x.x.x.x/24' port port=22 protocol=tcp reject"</span></span><br><span class="line"> <span class="comment">#允许ip访问 ssh</span></span><br><span class="line">  firewall-cmd --permanent --zone=public --add-rich-rule=<span class="string">"rule family=ipv4 source address='x.x.x.x/24' port port=22 protocol=tcp accept"</span></span><br><span class="line"><span class="comment">#删除</span></span><br><span class="line">firewall-cmd --remove-rich-rule <span class="string">'rule family=ipv4 source address=x.x.x.x/24 service name=ftp accept'</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;firewalld-基本使用&quot;&gt;&lt;a href=&quot;#firewalld-基本使用&quot; class=&quot;headerlink&quot; title=&quot;firewalld 基本使用&quot;&gt;&lt;/a&gt;firewalld 基本使用&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#启动 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;systemctl start firewalld&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#停止&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;systemctl &lt;span class=&quot;built_in&quot;&gt;disable&lt;/span&gt; firewalld&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#查看状态 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;systemctl status firewalld &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#重启&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;systemctl restart firewalld&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#禁用 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;systemctl stop firewalld&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#开机启动&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;systemctl &lt;span class=&quot;built_in&quot;&gt;enable&lt;/span&gt; firewalld&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#开机禁用&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;systemctl &lt;span class=&quot;built_in&quot;&gt;disable&lt;/span&gt; firewalld&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#是否开机启动&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;systemctl is-enabled firewalld&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="Linux" scheme="http://yoursite.com/categories/Linux/"/>
    
    
      <category term="防火墙" scheme="http://yoursite.com/tags/firewall/"/>
    
  </entry>
  
  <entry>
    <title>爬虫：xpath 提取数据</title>
    <link href="http://yoursite.com/Python_Crawlwe_xpath.html"/>
    <id>http://yoursite.com/Python_Crawlwe_xpath.html</id>
    <published>2018-01-25T08:01:10.950Z</published>
    <updated>2018-01-25T08:01:10.953Z</updated>
    
    <content type="html"><![CDATA[<h3 id="lxml-安装"><a href="#lxml-安装" class="headerlink" title="lxml 安装"></a>lxml 安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install lxml</span><br></pre></td></tr></table></figure><h3 id="xpath引用"><a href="#xpath引用" class="headerlink" title="xpath引用"></a>xpath引用</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">from lxml import etree</span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="XPath表达式"><a href="#XPath表达式" class="headerlink" title="XPath表达式"></a>XPath表达式</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#XPath基本语法</span></span><br><span class="line">  /    <span class="comment">#从根节点选取</span></span><br><span class="line">  //   <span class="comment">#选择任意位置的某个节点</span></span><br><span class="line">  |    <span class="comment">#选取若干个路径</span></span><br><span class="line">  .    <span class="comment">#选取当前节点</span></span><br><span class="line">  ..   <span class="comment">#选取当前节点的父节点</span></span><br><span class="line">  @    <span class="comment">#选取属性</span></span><br><span class="line"></span><br><span class="line">/text()  <span class="comment">#提取文本内容</span></span><br><span class="line">/@xxxx   <span class="comment">#提取属性内容</span></span><br><span class="line">//td                                <span class="comment">#选择所有的td元素</span></span><br><span class="line">//div[@calss=<span class="string">"mine"</span>]                <span class="comment">#选择所有具有class=mine属性的div元素</span></span><br><span class="line">&lt;html&gt;.xpath(<span class="string">"/html/head/title"</span>)    <span class="comment">#选择html中head标签的title元素</span></span><br></pre></td></tr></table></figure><h3 id="Chrome-获取xpath"><a href="#Chrome-获取xpath" class="headerlink" title="Chrome 获取xpath"></a>Chrome 获取xpath</h3><ol><li>打开Chrome浏览器</li><li>进入开发者工具</li><li>右键相应标签-Copy-Copy XPath</li></ol><h3 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h3><p><a href="https://github.com/Lianyi-xz/amap-Python/blob/master/nj/crawl.py" target="_blank" rel="noopener">我的脚本</a></p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;lxml-安装&quot;&gt;&lt;a href=&quot;#lxml-安装&quot; class=&quot;headerlink&quot; title=&quot;lxml 安装&quot;&gt;&lt;/a&gt;lxml 安装&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;pip install lxml&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;xpath引用&quot;&gt;&lt;a href=&quot;#xpath引用&quot; class=&quot;headerlink&quot; title=&quot;xpath引用&quot;&gt;&lt;/a&gt;xpath引用&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;from lxml import etree&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="Python" scheme="http://yoursite.com/categories/Python/"/>
    
    
      <category term="爬虫" scheme="http://yoursite.com/tags/Crawler/"/>
    
  </entry>
  
  <entry>
    <title>爬虫：Beautiful Soup库-提取数据</title>
    <link href="http://yoursite.com/Python_Crawler_bs4.html"/>
    <id>http://yoursite.com/Python_Crawler_bs4.html</id>
    <published>2018-01-25T07:47:19.446Z</published>
    <updated>2018-01-25T07:47:19.450Z</updated>
    
    <content type="html"><![CDATA[<h3 id="beautifulsoup安装"><a href="#beautifulsoup安装" class="headerlink" title="beautifulsoup安装"></a>beautifulsoup安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install beautifulsoup4</span><br></pre></td></tr></table></figure><h3 id="beautifulsoup引用"><a href="#beautifulsoup引用" class="headerlink" title="beautifulsoup引用"></a>beautifulsoup引用</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">from bs4 import BeautifulSoup</span><br><span class="line">import bs4</span><br></pre></td></tr></table></figure><h3 id="Beatiful-Soup类基本元素"><a href="#Beatiful-Soup类基本元素" class="headerlink" title="Beatiful Soup类基本元素"></a>Beatiful Soup类基本元素</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Tag                <span class="comment">#标签             &lt;tag&gt; 整个html文件</span></span><br><span class="line">Name               <span class="comment">#标签的名字        &lt;tag&gt;.name</span></span><br><span class="line">Attributes         <span class="comment">#标签属性          &lt;tag&gt;.attrs   数组形式</span></span><br><span class="line">NavigableString    <span class="comment">#标签内容          &lt;tag&gt;.string</span></span><br><span class="line">Comment            <span class="comment">#标签内容注释部分   &lt;tag&gt;.string</span></span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="Html内容遍历方法"><a href="#Html内容遍历方法" class="headerlink" title="Html内容遍历方法"></a>Html内容遍历方法</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#上行遍历</span></span><br><span class="line">   .parent            <span class="comment">#父节点标签</span></span><br><span class="line">   .parents           <span class="comment">#节点先辈标签的迭代类型</span></span><br><span class="line"><span class="comment">#下行遍历</span></span><br><span class="line">   .contents          <span class="comment">#子节点列表</span></span><br><span class="line">   .children          <span class="comment">#子节点的迭代类型</span></span><br><span class="line">   .deseendants       <span class="comment">#子孙节点的迭代类型</span></span><br><span class="line"><span class="comment">#平行遍历(同一个父节点)</span></span><br><span class="line">   .next_sibling      <span class="comment">#下一个平行节点</span></span><br><span class="line">   .previous_sibling  <span class="comment">#上一个平行节点</span></span><br><span class="line">   .next_siblings     <span class="comment">#所有后续平行节点</span></span><br><span class="line">   .previous_siblings <span class="comment">#所有前续平行节点</span></span><br></pre></td></tr></table></figure><h3 id="find-all方法"><a href="#find-all方法" class="headerlink" title="find_all方法"></a>find_all方法</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;tag&gt;(..)  eq  &lt;tag&gt;.find_all(..)</span><br><span class="line">soup(..)   eq  soup.find_all(..)</span><br><span class="line"></span><br><span class="line">.find_all(name,attrs,recursive,string,**kwargs) </span><br><span class="line">  name：     <span class="comment">#对标签名称的检索字符串</span></span><br><span class="line">  attrs:     <span class="comment">#对标签属性值的检索字符串，可标注属性检索</span></span><br><span class="line">  recursive: <span class="comment">#是否针对所有子孙节点搜索，默认True</span></span><br><span class="line">  string:     <span class="comment">#对标签内容进行检索</span></span><br><span class="line">  </span><br><span class="line">soup.find_all(id=<span class="string">"link2"</span>)</span><br><span class="line">soup.find_all(<span class="string">"a"</span>, class_=<span class="string">"sister"</span>)</span><br><span class="line">soup.find_all(<span class="string">"a"</span>, attrs=&#123;<span class="string">"class"</span>: <span class="string">"sister"</span>&#125;)</span><br></pre></td></tr></table></figure><h3 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h3><p><a href="https://github.com/Lianyi-xz/Crawler-learn/tree/master/bs4" target="_blank" rel="noopener">我的脚本</a><br><a href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/index.zh.html" target="_blank" rel="noopener">Beautiful Soup 4.2.0</a></p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;beautifulsoup安装&quot;&gt;&lt;a href=&quot;#beautifulsoup安装&quot; class=&quot;headerlink&quot; title=&quot;beautifulsoup安装&quot;&gt;&lt;/a&gt;beautifulsoup安装&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;pip install beautifulsoup4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;beautifulsoup引用&quot;&gt;&lt;a href=&quot;#beautifulsoup引用&quot; class=&quot;headerlink&quot; title=&quot;beautifulsoup引用&quot;&gt;&lt;/a&gt;beautifulsoup引用&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;from bs4 import BeautifulSoup&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import bs4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Beatiful-Soup类基本元素&quot;&gt;&lt;a href=&quot;#Beatiful-Soup类基本元素&quot; class=&quot;headerlink&quot; title=&quot;Beatiful Soup类基本元素&quot;&gt;&lt;/a&gt;Beatiful Soup类基本元素&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Tag                &lt;span class=&quot;comment&quot;&gt;#标签             &amp;lt;tag&amp;gt; 整个html文件&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Name               &lt;span class=&quot;comment&quot;&gt;#标签的名字        &amp;lt;tag&amp;gt;.name&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Attributes         &lt;span class=&quot;comment&quot;&gt;#标签属性          &amp;lt;tag&amp;gt;.attrs   数组形式&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NavigableString    &lt;span class=&quot;comment&quot;&gt;#标签内容          &amp;lt;tag&amp;gt;.string&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Comment            &lt;span class=&quot;comment&quot;&gt;#标签内容注释部分   &amp;lt;tag&amp;gt;.string&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="Python" scheme="http://yoursite.com/categories/Python/"/>
    
    
      <category term="爬虫" scheme="http://yoursite.com/tags/Crawler/"/>
    
  </entry>
  
  <entry>
    <title>爬虫：request库获取页面</title>
    <link href="http://yoursite.com/Python_Crawler_request.html"/>
    <id>http://yoursite.com/Python_Crawler_request.html</id>
    <published>2018-01-25T06:04:15.683Z</published>
    <updated>2018-01-25T06:04:15.691Z</updated>
    
    <content type="html"><![CDATA[<h3 id="requests安装"><a href="#requests安装" class="headerlink" title="requests安装"></a>requests安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install requests</span><br></pre></td></tr></table></figure><h3 id="Requests"><a href="#Requests" class="headerlink" title="Requests"></a>Requests</h3><blockquote><p>Requests：对html操作</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Requests七个主要方法</span></span><br><span class="line">  request()         <span class="comment">#构造一个请求</span></span><br><span class="line">  get()             <span class="comment">#获取html网页</span></span><br><span class="line">  head()            <span class="comment">#获取html头信息</span></span><br><span class="line">  post()            <span class="comment">#向html提交post请求  增</span></span><br><span class="line">  put()             <span class="comment">#提交put请求         改(改所有字段)</span></span><br><span class="line">  patch()           <span class="comment">#提交局部修改请求     改</span></span><br><span class="line">  delete()          <span class="comment">#提交删除请求</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">#Requests库异常</span></span><br><span class="line">  ConnectionError           </span><br><span class="line">  HTTPError</span><br><span class="line">  URLRequired               <span class="comment">#url缺失</span></span><br><span class="line">  TooManyRedirects          <span class="comment">#最大重定向次数</span></span><br><span class="line">  ConnectTimeout            <span class="comment">#链接超时</span></span><br><span class="line">  Timeout                   <span class="comment">#请求超时</span></span><br><span class="line">  </span><br><span class="line"><span class="comment">#获取一个网页</span></span><br><span class="line">  r = requests.get(url)</span><br><span class="line">  requests.get(url,params=None,**kwargs)</span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="Response"><a href="#Response" class="headerlink" title="Response"></a>Response</h3><blockquote><p>Response：html返回内容</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Response对象的属性</span></span><br><span class="line">  r.status_code              <span class="comment">#http请求返回状态</span></span><br><span class="line">  r.text                     <span class="comment">#http响应内容的字符串形式</span></span><br><span class="line">  r.encoding                 <span class="comment">#http的头部猜测(charset)的响应内容编码方式</span></span><br><span class="line">  r.apparent_encoding        <span class="comment">#http内容中分析的响应内容编码方式</span></span><br><span class="line">  r.content                  <span class="comment">#http响应的二进制形式</span></span><br><span class="line">  </span><br><span class="line"><span class="comment">#Response异常</span></span><br><span class="line">  r.raise_for_status()    <span class="comment">#判断r.status_code是否为200，否 返回异常</span></span><br></pre></td></tr></table></figure><h3 id="kwargs控制访问参数"><a href="#kwargs控制访问参数" class="headerlink" title="**kwargs控制访问参数"></a>**kwargs控制访问参数</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">params           <span class="comment">#字典或字节序列，作为参数添加到url中</span></span><br><span class="line">data             <span class="comment">#字典、字节序列或文件对象,作为Request的内容</span></span><br><span class="line">json             <span class="comment">#json格式的数据，作为Request内容</span></span><br><span class="line">headers          <span class="comment">#字典，http定制头     hd = &#123;'user-agent':'Chrome/10  '&#125; Mozilla/5.0</span></span><br><span class="line">cookies          <span class="comment">#字典或CookieJar,Request中的cookie</span></span><br><span class="line">auth             <span class="comment">#元祖，支持HTTP认证功能</span></span><br><span class="line">files            <span class="comment">#字典，传输文件         fs = &#123;'file':open('data.xls','rb')&#125;</span></span><br><span class="line">timeout          <span class="comment">#设置超时时间，单位为秒</span></span><br><span class="line">proxies          <span class="comment">#字典，设定访问代理服务器，可增加登录认证</span></span><br><span class="line">allow_redirects  <span class="comment">#True/False 是否允许重定向</span></span><br><span class="line">stream           <span class="comment">#是否立即下载内容 默认Ture</span></span><br><span class="line">verify           <span class="comment">#ssl证书开关，默认True</span></span><br><span class="line">cert             <span class="comment">#本地ssl证书路径</span></span><br></pre></td></tr></table></figure><h3 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h3><p><a href="https://github.com/Lianyi-xz/Crawler-learn/tree/master/request" target="_blank" rel="noopener">我的脚本</a><br><a href="http://cn.python-requests.org/zh_CN/latest/" target="_blank" rel="noopener">中文requests</a><br><a href="http://docs.python-requests.org/en/master/user/quickstart/#json-response-content" target="_blank" rel="noopener">英文requests</a></p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;requests安装&quot;&gt;&lt;a href=&quot;#requests安装&quot; class=&quot;headerlink&quot; title=&quot;requests安装&quot;&gt;&lt;/a&gt;requests安装&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;pip install requests&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Requests&quot;&gt;&lt;a href=&quot;#Requests&quot; class=&quot;headerlink&quot; title=&quot;Requests&quot;&gt;&lt;/a&gt;Requests&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;Requests：对html操作&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#Requests七个主要方法&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  request()         &lt;span class=&quot;comment&quot;&gt;#构造一个请求&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  get()             &lt;span class=&quot;comment&quot;&gt;#获取html网页&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  head()            &lt;span class=&quot;comment&quot;&gt;#获取html头信息&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  post()            &lt;span class=&quot;comment&quot;&gt;#向html提交post请求  增&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  put()             &lt;span class=&quot;comment&quot;&gt;#提交put请求         改(改所有字段)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  patch()           &lt;span class=&quot;comment&quot;&gt;#提交局部修改请求     改&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  delete()          &lt;span class=&quot;comment&quot;&gt;#提交删除请求&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#Requests库异常&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ConnectionError           &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  HTTPError&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  URLRequired               &lt;span class=&quot;comment&quot;&gt;#url缺失&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  TooManyRedirects          &lt;span class=&quot;comment&quot;&gt;#最大重定向次数&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ConnectTimeout            &lt;span class=&quot;comment&quot;&gt;#链接超时&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Timeout                   &lt;span class=&quot;comment&quot;&gt;#请求超时&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#获取一个网页&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  r = requests.get(url)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  requests.get(url,params=None,**kwargs)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="Python" scheme="http://yoursite.com/categories/Python/"/>
    
    
      <category term="爬虫" scheme="http://yoursite.com/tags/Crawler/"/>
    
  </entry>
  
  <entry>
    <title>Django 模板(V)</title>
    <link href="http://yoursite.com/Python_Django_templates.html"/>
    <id>http://yoursite.com/Python_Django_templates.html</id>
    <published>2018-01-25T05:31:04.145Z</published>
    <updated>2018-01-25T05:31:04.149Z</updated>
    
    <content type="html"><![CDATA[<h3 id="创建模板文件夹"><a href="#创建模板文件夹" class="headerlink" title="创建模板文件夹"></a>创建模板文件夹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir projecct_name/app_name/templates/app_name</span><br></pre></td></tr></table></figure><h3 id="模板基本操作"><a href="#模板基本操作" class="headerlink" title="模板基本操作"></a>模板基本操作</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#编辑应用首页模板</span></span><br><span class="line">edit projecct_name/app_name/templates/app_name/index.html</span><br><span class="line"><span class="comment">#嵌入代码</span></span><br><span class="line">&#123;% code %&#125;</span><br><span class="line"><span class="comment">#嵌入变量</span></span><br><span class="line">&#123;&#123; var &#125;&#125;</span><br><span class="line"><span class="comment">#嵌入 url, url_name 为设置url.path时填写的name内容</span></span><br><span class="line">&#123;% url <span class="string">'app_name:url_name'</span> var%&#125;</span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="if语句"><a href="#if语句" class="headerlink" title="if语句"></a>if语句</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% <span class="keyword">if</span> a %&#125;</span><br><span class="line">  &#123;&#123; a &#125;&#125;</span><br><span class="line">&#123;% <span class="keyword">else</span> %&#125;</span><br><span class="line">  &lt;p&gt; empty&lt;/p&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure><h3 id="静态文件"><a href="#静态文件" class="headerlink" title="静态文件"></a>静态文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">edit projecct_name/app_name/templates/app_name/index.html</span><br><span class="line"></span><br><span class="line">&#123;#加载静态文件#&#125;</span><br><span class="line">&#123;% load static %&#125;</span><br><span class="line">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;&#123;% static &apos;polls/css/style.css&apos; %&#125;&quot; /&gt;</span><br><span class="line">&lt;img src=&quot;&#123;% static &apos;polls/images/one.jpg&apos; %&#125;&quot; alt=&quot;静态图片&quot; &gt;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;创建模板文件夹&quot;&gt;&lt;a href=&quot;#创建模板文件夹&quot; class=&quot;headerlink&quot; title=&quot;创建模板文件夹&quot;&gt;&lt;/a&gt;创建模板文件夹&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;mkdir projecct_name/app_name/templates/app_name&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;模板基本操作&quot;&gt;&lt;a href=&quot;#模板基本操作&quot; class=&quot;headerlink&quot; title=&quot;模板基本操作&quot;&gt;&lt;/a&gt;模板基本操作&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#编辑应用首页模板&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;edit projecct_name/app_name/templates/app_name/index.html&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#嵌入代码&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;% code %&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#嵌入变量&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&amp;#123; var &amp;#125;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#嵌入 url, url_name 为设置url.path时填写的name内容&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;% url &lt;span class=&quot;string&quot;&gt;&#39;app_name:url_name&#39;&lt;/span&gt; var%&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="Python" scheme="http://yoursite.com/categories/Python/"/>
    
    
      <category term="Django" scheme="http://yoursite.com/tags/Django/"/>
    
  </entry>
  
</feed>
